<!DOCTYPE html>
<html class="h-100" lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>@ViewBag.Title - Information Manager 2022</title>
    <link rel="icon" type="image/x-icon" href="~/Content/Images/driver-2.ico" />
    @Styles.Render("~/Content/css")
    @Styles.Render("~/Content/skd")
    @Styles.Render("~/Content/website")
    <link href="~/Scripts/SkdWebHelper/Skd.Font.css" rel="stylesheet" />
    <link href="~/Scripts/SkdWebHelper/Skd-Dark.Bootstrap.css" rel="stylesheet" />
    <link href="~/Scripts/SkdWebHelper/Skd-Dark.css" rel="stylesheet" />
    @RenderSection("styles", required: false)
    <style>
        :root {
            --header-height: 38px;
            --footer-height: 44px;
        }

        header {
            text-align: center;
            min-height: var(--header-height);
            font-size: 24px;
        }

            /*header .fas {
                position: absolute;
                left: 0;
                margin: 4px;
                font-size: 30px;
            }*/

        .content {
            min-height: calc(100vh - var(--header-height) - var(--footer-height));
            max-height: calc(100vh - var(--header-height) - var(--footer-height));
            margin: var(--header-height) 0 var(--footer-height) 0;
            padding: .25rem;
            overflow-y: auto;
        }

        footer {
            text-align: left;
            min-height: var(--footer-height);
            font-size: 24px;
        }
    </style>

    @Scripts.Render("~/bundles/modernizr")
    <script>
        var highlightRowIds = [];
        //highlightRowIds.push('34c484d7-4af7-4b7f-92fe-b29a095f2491');
        @if(TempData.ContainsKey("highlightRowIds"))
        {
            foreach(string id in TempData["highlightRowIds"].ToString().Split(';'))
            {
                <text>highlightRowIds.push('@id');</text>
            }
        }
    </script>
</head>
<body>
    <header class="d-flex fixed-top text-bg-warning">
        <div class="col-auto ps-1 pe-0"><span id="top_btn_home" class="fas fa-@ViewBag.Icon"></span></div>
        <div class="col px-1">@ViewBag.Title</div>
        <div class="col-auto ps-0 pe-1">
            @*<span class="badge text-bg-secondary" style="padding: .35rem;"><span class="fas fa-refresh"></span> Refresh</span>*@
            <span id="top_btn_sync" class="fas fa-sync"></span>
        </div>
    </header>

    <div class="content">
        <form id="pageForm" method="post" novalidate>
            @RenderBody()
        </form>
    </div>
    @*<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.js" integrity="sha512-ia48mJh6IXv6baAI07Ib/crgsG/MD4tbSnOndWLo3GSExMhYsn1xPbni40VamCaXWk79t1dxi/JahsqOFazkew==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>*@
    <footer class="fixed-bottom text-bg-warning">
        @{
            var cigPackage = -1;
            using (var db = new Db())
            {
                cigPackage = db.Database.SqlQuery<int>("SELECT COUNT(1) FROM Daily WHERE typeId = 9503 AND registerDateTime >= (SELECT MAX(registerDateTime) FROM Daily WHERE typeId = 9503 AND optionId = 25 AND createUserId = {0}) AND createUserId = {1}", Common.User.userId, Common.User.userId).First();
            }
        }
        <div class="d-flex" style="height: 44px;">
            <div class="col ps-2 pe-1 text-truncate" style="padding-top: 2px;">@Common.User.CompleteName()</div>
            <div class="col-auto pe-2 ps-1">
                <span class="badge text-bg-secondary" style="padding: .35rem;"><span class="fas fa-box-open"></span> @(20 - cigPackage)</span>
                <span class="badge text-bg-danger" style="padding: .35rem;"><span class="fas fa-smoking"></span> @Common.User.Stat.RetrieveAsOptionGroup(9503).qtyMorning</span>
            </div>
        </div>
    </footer>

    <right skd-sidebar loading-message="Loading content..." style="display: none">Loading content...</right>

    @Scripts.Render("~/bundles/jquery")
    <script src="~/Scripts/bootstrap.bundle.min.js"></script>
    @Scripts.Render("~/bundles/skd")
    @Scripts.Render("~/bundles/website")
<script>
        /* After user scripts */
        var pageForm;

        $(function () {
            pageForm = $("#pageForm");

            $("header #top_btn_home").click(function (e) {
                Skd.PageLoading("Going to Dashboard");
                location.href = "/";
            });
            $("header #top_btn_sync").click(function (e) {
                Skd.PageLoading("Refreshing page...");
                location.reload();
            });
        });
</script>
    <!-- scripts -->
    <!-- section: scripts -->
    @RenderSection("scripts", required: false)
    <!-- section: scripts END -->
    <script>
        /* After user scripts */
        $(function () {
            @Message.JavaScriptLines()
            Skd.ContentLoadingHide();
        });
    </script>
</body>
</html>